<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>LiveFit: LiveFit Demonstration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LiveFit
   </div>
   <div id="projectbrief">Track and plot projectiles for in-class demonstration</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">LiveFit Demonstration </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Introduction</h1>
<p>This is a live fitting demonstration application to run during classes in order to motivate discussion about standard projectile motion models.</p>
<h1>Preliminary Setup</h1>
<p>Before using the demonstration, there is some setup.</p>
<ol type="1">
<li>Connect the computer to the projector. Ideally, set the projector screen up as an extra screen (not screen mirroring).</li>
<li>If using an external camera, connect it to the machine and install that all appropriate drivers are installed. For example, if on a Mac, test that Photo Booth works with the camera to be used.</li>
<li>Note down the following measurements:<ul>
<li>The FOV of the camera. This is a value in degrees, which is probably mentioned in the specifications for your camera, whether in the manual or online. For example, the PS3 eye has two FOV settings: 56deg (blue) and 75deg (red). <em>If you cannot find this information, the default value of 56deg may suffice</em>.</li>
<li>The <b>width</b> and <b>height</b> of the projection from the projector, in inches.</li>
<li>The distance from the projector screen, in inches, which you plan to throw the ball across. This is a <b>negative</b> number, as the negative direction points towards the camera.</li>
</ul>
</li>
<li>Start the LiveFit application. Pop out the black projector docking widget on the left if it is not a floating window. Place the window on the projector screen and resize it so that it fills the entire projection.</li>
<li>The application has started, and should be displaying a video feed. If your computer has an internal webcam, it should be displayed inside of the LiveFit application; if not, it should have your external camera displayed. If it is displaying your internal webcam but you wish to use an external camera, try selecting a different camera under File&gt;Camera&gt;1 (or 2, or 3, etc.).</li>
<li><b>Point your camera so that the entire projector screen is in frame</b>. Move the corners (the green circles with wedges in the video feed) so that they sit on the corners of the projector screen. Make sure that the correct corners are placed on the correct corners! The small slice of the wedge should cover the projector screen, and the large slice should be outside.</li>
<li>Click on the <em>World</em> tab on the settings panel on the right. Enter your measured projector width, height, distance of the ball-throwing plane ("ball
   Z"), and camera FOV.</li>
<li>Click on the <em>Video</em> tab. Stand out of the frame and test throwing some balls across the screen. You are checking that:<ul>
<li>The balls are being detected. There should be blue circles and red boxes in the application video frame that follow the same trajectory of the balls you have tossed. If they are not appearing, you may need to alter some settings.</li>
<li>The projector display information is <em>not causing a feedback loop</em> and being detected as a phantom ball toss. If this happens, you may need to change the settings.</li>
</ul>
</li>
<li>By this point, if you throw a ball across the screen, there should be information on the projector screen: Points should mark where the camera thinks the ball has passed, and after each toss a white parabola should indicate the predicted trajectory of the ball.</li>
<li>Now alter settings in the <em>Data</em> tab so that:<ul>
<li>The appropriate amount of information is displayed for your demonstration, and</li>
<li>The information is visible to students in your classroom (line thickness, font size, mark radius, etc).</li>
</ul>
</li>
<li>As you step through the demonstration, you may turn on data options here. See the example demonstration procedure for ideas.</li>
</ol>
<h1>Example LiveFit demonstration procedure</h1>
<p>When running the demonstration in your class, the procedure is of course up to you! Here is an example format for a typical-length calculus I class demonstration period. This example scenario comes at a period right after discussing solving a simultaneous system of a equations to find lines from 2 points and quadratic equations from 3, and immediately before starting a related lab assignment on fitting trajectories to spotted data from a video file.</p>
<p>Setup camera, computer, projector, and settings before the class period starts. Set program to hide fit curves, and not show any parametrization information.</p>
<ol type="1">
<li>Introduce the students to the program; demonstrate how it works: It sees balls in motion in front of the projector and identifies where they are. Throw a few balls in front of the screen slowly so they can see the marked trajectories. <em>Q</em>: What shape is the trajectory?</li>
<li>Remind students of the model of standard projectile motion; that x(t) is a linear equation and that y(t) is a quadratic equation. Turn on "lock fit
   until reset". Throw a ball in front of the screen; if the track is adequate (reset by clicking the button below the video and try again if not). Points are displayed as (t, x, y). 3 points marked like this are the first, highest, and most recent.</li>
<li>Use the first and last points to compute a linear x(t) function, then all 3 points to compute a quadratic y(t) function. Turn on "show x(t) and y(t)". Equations displayed should be the same as worked out on the board. <em>Recall</em> that points displayed are not in any normal units (unknown space or time units) and that to the computer software, <em>down is the positive y direction</em>. Ask if this makes sense with regards to y(t): Does the parabola open towards the positive or the negative direction (it should towards the positive)?</li>
<li><p class="startli">Ask students what they recall the various coefficients of x(t), y(t) mean.</p><ul>
<li>x(t) = t*[initial x velocity] + [initial x position]:</li>
<li>y(t) = t<sup>2</sup>g/2 + t*[initial y velocity] + [initial y position]</li>
</ul>
<p class="startli">What does the t<sup>2</sup> coefficient of y(t) mean (half of "acceleration
   due to gravity")? <em>Q</em> Do you think it will be different for different throws?</p>
</li>
<li>Turn off "lock fit until reset" and throw more in front of the projector. After each throw, ask students to record the coefficient of t<sup>2</sup>. After a number of "good" throws/fits, ask the students whether they agree that the coefficient isn't changing, and why? (The numbers should be more or less the same).</li>
</ol>
<h1>Settings pane descriptions</h1>
<h2>World</h2>
<ul>
<li><b>ProjW</b>: Measured width of the projector screen, in inches.</li>
<li><b>ProjH</b>: Measured height of the projector screen, in inches.</li>
<li><b>BallZ</b>: Distance from the projector screen plane to the ball toss plane, in inches (this should be a negative number).</li>
<li><b>FOV</b>: The frame of view (FOV) of your particular camera, in degrees.</li>
</ul>
<h2>Video</h2>
<ul>
<li><b>BlurSize</b>: Strength of the gaussian blur during preprocessing. In general, a larger value here will reduce some sensitivity and cause some blobs to be connected rather than disconnected. Possible suggestion: 10px</li>
<li><b>ThreshVal</b>: The minimum value for pixels to be considered during preprocessing. In general, a lower value will be <em>more noisy and more sensitive</em> while a higher value will be <em>less sensitive</em> but might miss important blobs if they are not clear enough. Possible suggestion: 7.00</li>
<li><b>MinRadius</b>: Minimum radius of a blob to be considered a "ball". Make higher if noise is being detected as ball, or smaller if balls are being ignored. Possible suggestion: 2px.</li>
<li><b>MaxRadius</b>: Maximum radius of a blob to be considered a "ball". Make higher if large blobs are being detected as balls (e.g. a whole moving person), or smaller if balls are being ignored. Possible suggestion: 30px.</li>
<li><b>GravConstant</b>: An <em>a priori</em> guess of the gravitational constant <em>g</em> in image coordinates, px/sec^2. This is used in tracking to help predict how balls will fall. Suggested value: 480px/s^2.</li>
<li><b>Frame</b>: What type of frame to display. Default is "Video," which displays video with blobs present after the diff/blur/thresh steps. "Video" is probably best here.</li>
<li><b>XYCovariance</b>: Covariance between the X and Y coordinates of a ball in motion for the tracker. Probably best to leave this at exp(1.00)</li>
</ul>
<h2>Data</h2>
<ul>
<li><b>Lock fit until clear</b>: Once the camera has detected a fit (the fit curve is white and parametric equations are displayed), don't track any new balls or change any display information. <b>When this is enabled, use "Drop Tracking
  Points" to clear the lock and enable tracking again</b>. Suggested to use this while working examples on the board, so that data is not dropped unexpectedly.</li>
<li><b>Clip track to projector</b>: Whether or not to ignore blobs which are not in front of the projector screen. Suggested if you will be in the camera's frame so that the camera can ignore you entirely and focus on the balls.</li>
<li><b>Show x(t), y(t)</b>: Whether or not to show the parametric equations for the fit on the projector screen.</li>
<li><b>Color track misses</b>: Whether or not to color points on the projector yellow if they are not based on visual data. Suggested to leave this off during demonstrations.</li>
<li><b>Show dx/dt, dy/dt</b>: Whether or not to show the predicted velocity vector of the tracked balls on the projector.</li>
<li><b>Verbose KF track points</b>: Whether or not to show the size of the seen blobs on the projector screen. Suggested: Off.</li>
<li><b>Point radius</b>: Radius of the points for tracked balls on the projector.</li>
<li><b>Point thickness</b>: Thickness of the lines for tracked balls on the projector.</li>
<li><b>Show fit parabola</b>: Whether or not to show the fit curve defined by the parametric fit.</li>
<li><b>Only lock after falling</b>: Whether to wait until the ball has a downward trajectory to fit an equation. Suggested: on, since the quadratic fit might not be good enough otherwise...</li>
<li><b>Min fall speed</b>: Minimum speed in frame coordinates to be considered "falling". The larger this is, the longer it might take for a fit curve, but the better the curve should be. Suggested: 5px/s</li>
<li><b>Font size</b>: The font size of the display on the projector; equations, points, marked points. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
